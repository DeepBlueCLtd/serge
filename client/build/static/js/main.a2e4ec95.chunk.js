(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(183)},17:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),i=a.n(s),c=a(2),o=a(3),l=a(5),u=a(4),p=a(6),m=a(7),d=(a(17),Object.freeze({ASYNC_SUCCESS:"ASYNC_SUCCESS",ASYNC_ERROR:"ASYNC_ERROR",ASYNC_LOADING:"ASYNC_LOADING",NORMAL_ACTION:"NORMAL_ACTION",DB_MESSAGE_STATUS:"DB_MESSAGE_STATUS",DB_MESSAGE_CREATION_LOADING:"DB_MESSAGE_CREATION_LOADING",DB_MESSAGE_GET_LOADING:"DB_MESSAGE_GET_LOADING",DB_SAVE_MESSAGES:"DB_SAVE_MESSAGES",DB_MESSAGE_TYPES_GET:"DB_MESSAGE_TYPES_GET",DB_MESSAGE_TYPES_SAVED:"DB_MESSAGE_TYPES_SAVED",SET_CURRENT_VIEW_FROM_URI:"SET_CURRENT_VIEW_FROM_URI",DB_MESSAGE_SAVED:"DB_MESSAGE_SAVED",DB_MESSAGES_GET:"DB_MESSAGES_GET",DB_RETURNED_MESSAGE:"DB_RETURNED_MESSAGE",RESET_MESSAGE_PREVIEW:"RESET_MESSAGE_PREVIEW",SET_SELECTED_SCHEMA:"SET_SELECTED_SCHEMA",SET_PREVIEW_SCHEMA:"SET_PREVIEW_SCHEMA",OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL",SET_CURRENT_GAME_SETUP_TAB:"SET_CURRENT_GAME_SETUP_TAB",SET_GAME_SETUP_DATA:"SET_GAME_SETUP_DATA",ALL_WARGAME_NAMES_SAVED:"ALL_WARGAME_NAMES_SAVED",SET_CURRENT_WARGAME:"SET_CURRENT_WARGAME",ADD_NEW_FORCE:"ADD_NEW_FORCE",SET_SELECTED_FORCE:"SET_SELECTED_FORCE",ADD_NEW_CHANNEL:"ADD_NEW_CHANNEL",SET_SELECTED_CHANNEL:"SET_SELECTED_CHANNEL",SET_WARGAME_NAME:"SET_WARGAME_NAME",SET_FORCE_OVERVIEW:"SET_FORCE_OVERVIEW",GAME_TITLE_INVALID:"GAME_TITLE_INVALID",ADD_NEW_RECIPIENT:"ADD_NEW_RECIPIENT",SHOW_NOTIFICATION:"SHOW_NOTIFICATION",HIDE_NOTIFICATION:"HIDE_NOTIFICATION",UPDATE_RECIPIENT:"UPDATE_RECIPIENT",REMOVE_RECIPIENT:"REMOVE_RECIPIENT",SET_CURRENT_WARGAME_PLAYER:"SET_CURRENT_WARGAME_PLAYER",SET_FORCE:"SET_FORCE",SET_ROLE:"SET_ROLE",SET_FILTERED_CHANNELS:"SET_FILTERED_CHANNELS",SET_CHANNEL:"SET_CHANNEL",SET_MESSAGE_SCHEMA:"SET_MESSAGE_SCHEMA",SET_LATEST_MESSAGES:"SET_LATEST_MESSAGES"})),h={open:function(e){return{type:d.OPEN_MODAL,payload:{open:!0,modal:e}}},close:function(){return{type:d.CLOSE_MODAL,payload:{open:!1,modal:""}}}},f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBackgroundClick=function(e){e.target===e.currentTarget&&a.props.dispatch(h.close())},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.editable?"modal setsize":"modal";return r.a.createElement("div",{className:"modal-bg",onClick:this.handleBackgroundClick},r.a.createElement("div",{className:e},this.props.children))}}]),t}(n.Component),E=Object(m.b)()(f),b=a(12),g=a.n(b),y=a(21),v=a(20),O=a(24),S=a.n(O),j=a(23),w=a.n(j),T=a(73),_=a.n(T),C="http://localhost:5000/api",k={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Authorization, Lang"},N={overview:"An overview written here..",roles:["General"]},M=[],A=function(){return Object(v.a)("".concat(C,"/wargames/populate")).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},I=function(e){return Object(v.a)("".concat(C,"/wargames/edit"),{method:"POST",headers:k,body:JSON.stringify({name:e})}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},R=function(e,t,a){return Object(v.a)("".concat(C,"/wargames/update"),{method:"POST",headers:k,body:JSON.stringify({dbName:e,data:t,title:a})}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},x=function(e){return Object(v.a)("".concat(C,"/wargames/duplicate"),{method:"POST",headers:k,body:JSON.stringify({dbName:e})}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},D=function(){return Object(v.a)("".concat(C,"/wargames/getActive")).then(function(e){if(console.log(e.ok),!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return console.log(e),e}).catch(function(e){return console.log(e)})},P=function(e,t,a){return new Promise(function(n,r){Object(v.a)("".concat(C,"/wargames/createMessage"),{method:"POST",headers:k,body:JSON.stringify({dbName:e,channel:t,message:a})}).then(function(e){return e.json()}).then(function(e){n(e)}).catch(function(e){console.log(e)})})},L=function(e){return Object(v.a)("".concat(C,"/wargames/getMessages/wargameId/").concat(e)).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},F=function(e){return{type:d.SET_CURRENT_GAME_SETUP_TAB,payload:e}},G=function(e){return{type:d.SET_GAME_SETUP_DATA,payload:e}},W=function(e){return{type:d.SET_WARGAME_NAME,payload:e}},U=function(e){return{type:d.ADD_NEW_FORCE,payload:e}},V=function(e){return{type:d.SET_SELECTED_FORCE,payload:e}},B=function(e){return{type:d.ADD_NEW_CHANNEL,payload:e}},H=function(e){return{type:d.SET_SELECTED_CHANNEL,payload:e}},$=function(e){return{type:d.SET_FORCE_OVERVIEW,payload:e}},q=function(e){return{type:d.ALL_WARGAME_NAMES_SAVED,payload:e}},Y=function(e){return{type:d.SET_CURRENT_WARGAME,payload:e}},Q=function(e){return{type:d.ADD_NEW_RECIPIENT,payload:e}},J=function(e,t){return{type:d.UPDATE_RECIPIENT,payload:{id:e,data:t}}},z=function(){return function(){var e=Object(y.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("".concat(C,"/wargames/create"),{method:"POST",headers:k}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)});case 2:a=e.sent,t(Y(w.a.omit(a,["_id","_rev"])));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Z=function(e,t,a){return function(){var n=Object(y.a)(g.a.mark(function n(r){var s;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(e,t,a);case 2:s=n.sent,r(Y(s));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hideModal=function(){a.setState({forceName:""}),a.props.dispatch(h.close())},a.setNewForceName=function(e){a.setState({forceName:e.target.value,sameName:a.props.wargame.tabs[a.props.wargame.currentTab].data.forces[e.target.value]})},a.addForce=function(){a.props.dispatch(U(a.state.forceName)),a.props.dispatch(V(a.state.forceName))},a.state={forceName:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.currentModal.open)return!1;var e=this.state.forceName.length<1||this.state.sameName;return r.a.createElement(E,null,r.a.createElement("div",{className:"display-text-wrapper"},r.a.createElement("h3",null,"Create force"),!!this.state.sameName&&r.a.createElement("p",{className:"notification"},"Already exists"),r.a.createElement("input",{autoFocus:!0,className:"modal-input",type:"text",onChange:this.setNewForceName}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{disabled:e,name:"add",className:"btn btn-action btn-action--primary",onClick:this.addForce},"Add"),r.a.createElement("button",{name:"cancel",className:"btn btn-action btn-action--secondary",onClick:this.hideModal},"Cancel"))))}}]),t}(n.Component),X=Object(m.b)(function(e){return{wargame:e.wargame,currentModal:e.currentModal}})(K),ee=a(92),te=function(e,t){return new Promise(function(a,n){Object(v.a)("".concat(C,"/messages/create"),{method:"POST",headers:k,body:JSON.stringify({message:e,schema:t})}).then(function(e){a(e.json())}).catch(function(e){return n(e)})})},ae=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messages/duplicate"),{method:"POST",headers:k,body:JSON.stringify({id:e})}).then(function(e){t(e.json())}).catch(function(e){return a(e)})})},ne=function(){return new Promise(function(e,t){Object(v.a)("".concat(C,"/messages/getAll")).then(function(t){e(t.json())}).catch(function(e){return t(e)})})},re=function(e,t){return new Promise(function(a,n){Object(v.a)("".concat(C,"/messages/update"),{method:"POST",headers:k,body:JSON.stringify({id:e,message:t})}).then(function(e){a(e.json())}).catch(function(e){return n(e)})})},se=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messages/get"),{method:"POST",headers:k,body:JSON.stringify({id:e})}).then(function(e){t(e.json())}).catch(function(e){return a(e)})})},ie=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messages/delete"),{method:"POST",headers:k,body:JSON.stringify({id:e})}).then(function(e){t(e.json())}).catch(function(e){return a(e)})})},ce=function(e){return{type:d.SHOW_NOTIFICATION,payload:{open:!0,message:e}}},oe=function(){return{type:d.HIDE_NOTIFICATION,payload:{open:!1,message:""}}},le=function(e){return{type:d.SET_CURRENT_VIEW_FROM_URI,payload:e}},ue=function(e){return{type:d.DB_MESSAGE_STATUS,payload:e}},pe=function(e){return{type:d.DB_MESSAGE_SAVED,payload:e}},me=function(e){return{type:d.DB_RETURNED_MESSAGE,payload:e}},de=function(e){return{type:d.DB_MESSAGE_CREATION_LOADING,isLoading:e}},he=function(e){return{type:d.DB_MESSAGES_GET,isLoading:e}},fe=function(){return{type:d.RESET_MESSAGE_PREVIEW}},Ee=function(e,t){if(!S.a.object(e))throw Error("createMessageType() requires object with message, from & to NOT. ".concat(e));return function(){var a=Object(y.a)(g.a.mark(function a(n){var r,s;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(de(!0)),a.prev=1,a.next=4,te(e,t);case 4:if((r=a.sent).err&&n(ce(r.err)),!r.ok){a.next=14;break}return n(ue(r)),a.next=10,ne();case 10:s=a.sent,n(pe(s)),n(de(!1)),n(le("/client/umpireMenu/library"));case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(1),n(de(!1)),alert(a.t0);case 20:case"end":return a.stop()}},a,null,[[1,16]])}));return function(e){return a.apply(this,arguments)}}()},be=function(e){if(!S.a.string(e))throw Error("duplicateMessage() requires a string Not. ".concat(e));return function(){var t=Object(y.a)(g.a.mark(function t(a){var n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(de(!0)),t.next=3,ae(e);case 3:if(!(n=t.sent)){t.next=10;break}return a(ue(n)),t.next=8,ne();case 8:r=t.sent,a(pe(r));case 10:a(de(!1));case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ge=function(e,t){if(!S.a.object(e))throw Error("updateMessage() requires object with message, from & to NOT. ".concat(e));return function(){var a=Object(y.a)(g.a.mark(function a(n){var r,s,i,c,o;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(de(!0)),a.prev=1,a.next=4,re(t,e);case 4:if((r=a.sent).err&&n(ce(r.err)),!r.ok){a.next=16;break}return n(ue(r)),a.next=10,Promise.all([ne(),se(r.id)]);case 10:s=a.sent,i=Object(ee.a)(s),c=i[0],o=i[1],n(me(o)),n(pe(c)),n(de(!1)),n(le("/client/umpireMenu/library"));case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(1),n(de(!1)),alert(a.t0);case 22:case"end":return a.stop()}},a,null,[[1,18]])}));return function(e){return a.apply(this,arguments)}}()},ye=function(e){if(!S.a.string(e))throw Error("duplicateMessage() requires a string Not. ".concat(e));return function(){var t=Object(y.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(de(!0)),t.next=3,ie(e);case 3:if(!t.sent){t.next=12;break}return t.next=7,ne();case 7:n=t.sent,a(pe(n)),a(fe()),t.next=12;break;case 12:a(de(!1));case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ve=function(e){if(!S.a.string(e))throw Error("duplicateMessage() requires a string id..");return function(){var t=Object(y.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(he(!0)),t.next=3,se(e);case 3:n=t.sent,a(me(n)),a(he(!1));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messageTypes/create"),{method:"POST",headers:k,body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t(e)}).catch(function(e){console.log(e)})})},Se=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messageTypes/duplicate"),{method:"POST",headers:k,body:JSON.stringify({id:e})}).then(function(e){t(e.json())}).catch(function(e){return a(e)})})},je=function(e,t){return new Promise(function(a,n){Object(v.a)("".concat(C,"/messageTypes/update"),{method:"POST",headers:k,body:JSON.stringify({id:t,schema:e})}).then(function(e){a(e.json())}).catch(function(e){return n(e)})})},we=function(e){return new Promise(function(t,a){Object(v.a)("".concat(C,"/messageTypes/delete"),{method:"POST",headers:k,body:JSON.stringify({id:e})}).then(function(e){t(e.json())}).catch(function(e){return a(e)})})},Te=function(){return new Promise(function(e,t){Object(v.a)("".concat(C,"/messageTypes/getAll")).then(function(t){e(t.json())}).catch(function(e){return t(e)})})},_e=function(e){return{type:d.DB_MESSAGE_STATUS,payload:e}},Ce=function(e){return{type:d.DB_MESSAGE_TYPES_SAVED,payload:e}},ke=function(e){return{type:d.DB_MESSAGE_CREATION_LOADING,isLoading:e}},Ne=function(e){return{type:d.DB_MESSAGE_TYPES_GET,isLoading:e}},Me=function(e){if(!S.a.object(e))throw Error("createMessageType() requires schema object & NOT. ".concat(e));return function(){var t=Object(y.a)(g.a.mark(function t(a){var n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(ke(!0)),t.prev=1,t.next=4,Oe(e);case 4:if((n=t.sent).err&&(a(ce(n.err)),a(ke(!1))),!n.ok){t.next=14;break}return a(_e(n)),t.next=10,Te();case 10:r=t.sent,a(Ce(r)),a(ke(!1)),a(le("/client/umpireMenu/templates"));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.log(t.t0);case 19:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()},Ae=function(e){if(!S.a.string(e))throw Error("duplicateTemplate() requires a string Not. ".concat(e));return function(){var t=Object(y.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(ke(!0)),t.next=3,Se(e);case 3:if(!t.sent){t.next=10;break}return a(_e(!0)),t.next=8,Te();case 8:n=t.sent,a(Ce(n));case 10:a(ke(!1));case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Ie=function(e,t){if(!S.a.object(e))throw Error("updateMessageType() requires schema & not ".concat(e));return function(){var a=Object(y.a)(g.a.mark(function a(n){var r,s;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(ke(!0)),a.prev=1,a.next=4,je(e,t);case 4:if((r=a.sent).err&&(n(ce(r.err)),n(ke(!1))),!r.ok){a.next=14;break}return n(_e(r.ok)),a.next=10,Te();case 10:s=a.sent,n(Ce(s)),n(ke(!1)),n(le("/client/umpireMenu/templates"));case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(1),n(ke(!1)),alert(a.t0);case 20:case"end":return a.stop()}},a,null,[[1,16]])}));return function(e){return a.apply(this,arguments)}}()},Re=function(e){if(!S.a.string(e))throw Error("deleteMessage() requires a string of id not. ".concat(e));return function(){var t=Object(y.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(ke(!0)),t.next=3,we(e);case 3:if(!t.sent){t.next=11;break}return t.next=7,Te();case 7:n=t.sent,a(Ce(n)),t.next=11;break;case 11:a(ke(!1));case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},xe=function(){return function(){var e=Object(y.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ne(!0)),e.next=3,Te();case 3:a=e.sent,t(Ce(a)),t(Ne(!1));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},De=function(e){return{type:d.SET_SELECTED_SCHEMA,payload:e}},Pe=function(e){return{type:d.SET_PREVIEW_SCHEMA,payload:e}},Le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).hideModal=function(){a.props.dispatch(h.close())},a.deleteMessage=function(){"/client/umpireMenu/templates"===a.props.currentViewURI?(a.props.dispatch(Re(a.props.umpireMenu.selectedSchemaID)),a.props.dispatch(Pe("")),a.props.dispatch(De(""))):a.props.dispatch(ye(a.props.messages.messagePreviewId))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!!this.props.currentModal.open&&r.a.createElement(E,null,r.a.createElement("div",{className:"display-text-wrapper"},r.a.createElement("h3",null,"Delete"),r.a.createElement("p",null,"This will permanently remove the message.",r.a.createElement("br",null),"Are you sure?"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{name:"delete",className:"btn btn-action btn-action--primary",onClick:this.deleteMessage},"Delete"),r.a.createElement("button",{name:"cancel",className:"btn btn-action btn-action--secondary",onClick:this.hideModal},"Cancel"))))}}]),t}(n.Component),Fe=Object(m.b)(function(e){return{currentModal:e.currentModal,messages:e.messages,umpireMenu:e.umpireMenu,currentViewURI:e.currentViewURI}})(Le),Ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hideModal=function(){a.setState({channelName:""}),a.props.dispatch(h.close())},a.setChannelName=function(e){a.setState({channelName:e.target.value,sameName:a.props.wargame.tabs[a.props.wargame.currentTab].data.channels[e.target.value]})},a.addChannel=function(){a.props.dispatch(B(a.state.channelName)),a.props.dispatch(H(a.state.channelName))},a.state={channelName:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.currentModal.open)return!1;var e=this.state.channelName.length<1||this.state.sameName;return r.a.createElement(E,null,r.a.createElement("div",{className:"display-text-wrapper"},r.a.createElement("h3",null,"Create channel"),!!this.state.sameName&&r.a.createElement("p",{className:"notification"},"Already exists"),r.a.createElement("input",{autoFocus:!0,className:"modal-input",type:"text",onChange:this.setChannelName}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{disabled:e,name:"add",className:"btn btn-action btn-action--primary",onClick:this.addChannel},"Add"),r.a.createElement("button",{name:"cancel",className:"btn btn-action btn-action--secondary",onClick:this.hideModal},"Cancel"))))}}]),t}(n.Component),We=Object(m.b)(function(e){return{wargame:e.wargame,currentModal:e.currentModal}})(Ge),Ue=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;switch(this.props.currentModal.modal){case"addForce":e=r.a.createElement(X,null);break;case"delete":e=r.a.createElement(Fe,null);break;case"addChannel":e=r.a.createElement(We,null);break;default:e=!1}return r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component),Ve=Object(m.b)(function(e){return{currentModal:e.currentModal}})(Ue),Be=a(13),He=a(14),$e=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClickHandler=function(e){a.props.dispatch(oe())},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!!this.props.notification.open&&r.a.createElement("div",{id:"notification"},this.props.notification.message,r.a.createElement(He.a,{icon:Be.f,onClick:this.onClickHandler}))}}]),t}(n.Component),qe=Object(m.b)(function(e){return{notification:e.notification}})($e),Ye=a(81),Qe=a(41),Je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClickHandler=function(e){a.props.onClickMethod&&a.props.onClickMethod();var t=e.metaKey||e.ctrlKey,n=a.props.href.startsWith("http");t||n||(e.preventDefault(),a.props.dispatch(le(a.props.href)))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("a",{href:this.props.href,onClick:this.onClickHandler,id:this.props.id?this.props.id:null,className:this.props.class?this.props.class:null},this.props.children)}}]),t}(n.Component),ze=Object(m.b)()(Je),Ze=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"umpire",className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content flex-content--fill"},r.a.createElement(ze,{href:"/client/umpireMenu",class:"link link--secondary link--large"},"Umpire Menu"),r.a.createElement(ze,{href:"/client/playerUi",class:"link link--secondary link--large"},"Player UI")))}}]),t}(n.Component),Ke=Object(m.b)(function(e){return Object(Qe.a)(e),{}})(Ze),Xe=a(45),et=a.n(Xe),tt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).filterMessages=function(e){var t=e?e.target.value:a.state.searchInput,n=a.props.listData.filter(function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1});a.setState({searchQuery:n,searchInput:e?t:a.state.searchInput})},a.displayControls=function(e){a.setState({activeTitle:e})},a.hideControls=function(){a.setState({activeTitle:!1})},a.state={messageList:a.props.listData,searchQuery:a.props.listData,searchInput:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){var n=w.a.difference(e.listData,this.state.messageList).length;(e.listData.length!==this.state.messageList.length||0!==n&&0===this.state.searchInput.length)&&this.setState({messageList:e.listData}),this.state.searchInput.length>0&&0!==n&&this.filterMessages()}},{key:"setSelectedWargame",value:function(e){this.props.dispatch(function(e){return function(){var t=Object(y.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:n=t.sent,a(Y(n));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(e)),this.props.dispatch(le("/client/gameSetup"))}},{key:"duplicateWargame",value:function(e){var t;this.props.dispatch((t=e,function(){var e=Object(y.a)(g.a.mark(function e(a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:n=e.sent,console.log(n),a(q(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this,t=this.state.searchInput?this.state.searchQuery:this.state.messageList;return r.a.createElement("div",{className:"searchlist"},r.a.createElement("input",{type:"text",className:"searchlist-input",key:"search-templates",placeholder:"Search games",onChange:this.filterMessages,value:this.state.searchInput}),r.a.createElement("div",{className:"searchlist-list"},t.map(function(t){return r.a.createElement("span",{className:"searchlist-title",key:t.title,onMouseOver:e.displayControls.bind(e,t.title),onMouseLeave:e.hideControls},t.title,e.state.activeTitle===t.title?r.a.createElement(r.a.Fragment,null,r.a.createElement(He.a,{icon:Be.c,onClick:e.setSelectedWargame.bind(e,t.name)}),r.a.createElement(He.a,{icon:Be.b,onClick:e.duplicateWargame.bind(e,t.name)})):null)})))}}]),t}(n.Component),at=Object(m.b)(function(e){return Object(Qe.a)(e),{}})(tt),nt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).createWargame=function(){a.props.dispatch(z())},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(function(){var e=Object(y.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:a=e.sent,t(q(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("div",{id:"umpire",className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content flex-content--big"},r.a.createElement(ze,{href:"/client/umpireMenu/templates",class:"link link--secondary link--large"},"Message Templates"),r.a.createElement(ze,{href:"/client/umpireMenu/library",class:"link link--secondary link--large"},"Message Library")),r.a.createElement("div",{className:"flex-content flex-content--big"},r.a.createElement("span",null,"Games"),r.a.createElement(ze,{href:"/client/gameSetup",class:"link link--noIcon",onClickMethod:this.createWargame},"Create"),r.a.createElement(at,{key:"searchlist",listData:this.props.wargame.wargameList})))}}]),t}(n.Component),rt=Object(m.b)(function(e){return{wargame:e.wargame}})(nt),st=a(46),it=a(25),ct=a.n(it),ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).saveMessage=function(){var e=a.props.messageTypes.messages.find(function(e){return e._id===a.props.umpireMenu.selectedSchemaID}).details;console.log(a.editor.getValue()),console.log(Object(st.a)({},e,{_id:a.props.umpireMenu.selectedSchemaID})),a.props.dispatch(Ee(a.editor.getValue(),Object(st.a)({},e,{_id:a.props.umpireMenu.selectedSchemaID})))},a.editor=null,a.editorPreviewRef=r.a.createRef(),a.state={selectedSchema:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){if(this.editor&&e.umpireMenu.selectedSchemaID!==this.props.umpireMenu.selectedSchemaID&&(this.editor.destroy(),this.editor=null),e.umpireMenu.selectedSchemaID.length>0&&e.messageTypes&&e.messageTypes.messages.length>0){if(this.editor)return;this.editor=new ct.a(this.editorPreviewRef.current,{schema:e.messageTypes.messages.find(function(t){return t._id===e.umpireMenu.selectedSchemaID}).details,theme:"bootstrap4"})}if(e.messages.messagePreviewId.length>0&&e.messageTypes.messages.length>0&&!e.disabled){var n=e.messages.messages.find(function(t){return t._id.toLowerCase().indexOf(e.messages.messagePreviewId.toLowerCase())>-1});this.editor.setValue(n.details)}this.props.disabled&&this.editor&&this.editor.disable()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"button-wrap"},this.props.disabled?null:r.a.createElement("span",{onClick:this.saveMessage,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")),r.a.createElement("div",{id:"preview-editor",ref:this.editorPreviewRef}),r.a.createElement("div",{className:"button-wrap"},this.props.disabled?null:r.a.createElement("span",{onClick:this.saveMessage,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")))}}]),t}(n.Component),lt=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes,selectedSchema:e.selectedSchema,umpireMenu:e.umpireMenu}})(ot),ut=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"createObjItem",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{key:"objItem--".concat(e[0],"-").concat(e[1]),className:"group-section"},this.deconstructObj(e[1])))}},{key:"createBoolItem",value:function(e){return r.a.createElement("span",{key:"boolItem--".concat(e[0],"-").concat(e[1])},!!e[1]&&e[0])}},{key:"createTimeItem",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,e[0]),r.a.createElement("span",{key:"dateTime-".concat(e[1])},et()(e[1]).format("Do MMMM YYYY, HH:mm")))}},{key:"createStrItem",value:function(e,t){return r.a.createElement("span",{key:"strItem-".concat(e[0],"-").concat(e[1])},r.a.createElement("b",null,e[0],": "),e[1])}},{key:"deconstructArr",value:function(e){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,e[0]),e[1].map(function(e){return r.a.createElement("span",{key:"section-".concat(e.name)},t.deconstructObj(e))}))}},{key:"deconstructObj",value:function(e){var t=this;return Object.entries(e).map(function(e,a){return S.a.object(e[1])?t.createObjItem(e):S.a.array.of.object(e[1])?t.deconstructArr(e):S.a.boolean(e[1])?t.createBoolItem(e):et()(e[1],et.a.ISO_8601,!0).isValid()?t.createTimeItem(e):t.createStrItem(e)})}},{key:"render",value:function(){if(!this.props.detail)return!1;var e=this;return Object.entries(this.props.detail).map(function(t,a){return 0===a?r.a.createElement("h2",{key:"title-".concat(t[1])},t[1]):S.a.object(t[1])?e.createObjItem(t):S.a.array.of.object(t[1])?e.deconstructArr(t):S.a.boolean(t[1])?e.createBoolItem(t):et()(t[1],et.a.ISO_8601,!0).isValid()?e.createTimeItem(t):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t[0]),r.a.createElement("span",{key:"".concat(t[0],"-").concat(t[1])},t[1]))})}}]),t}(n.Component),pt=Object(m.b)()(ut),mt=a(9),dt=a.n(mt),ht=(a(114),function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"invalid-notification"},r.a.createElement("p",null,this.props.children)))}}]),t}(n.Component)),ft=Object(m.b)(function(e){return Object(Qe.a)(e),{}})(ht),Et=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.props.updateStore(e.target.value)},a.state={type:a.props.options.numInput?"number":"text"},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.validInput?"":"invalid-input";if(!this.props.validInput)r.a.createElement(ft,null,"This name is not unique");return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:e,id:this.props.id?this.props.id:null,type:this.state.type,onChange:this.onChange,value:this.props.data?this.props.data:""}))}}]),t}(n.Component),bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setSelected=function(e){a.props.setSelected(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"searchlist"},r.a.createElement("input",{type:"text",className:"searchlist-input",key:"search-templates",placeholder:this.props.placeholder,onChange:this.props.filter,value:this.props.searchQuery}),r.a.createElement("div",{className:"searchlist-list"},this.props.listData.map(function(t){var a=t._id===e.props.selected?"active":null,n=t.details.title,s=et()(t.lastUpdated).format("DD/MM/YY");return r.a.createElement("span",{className:dt()({"searchlist-title":!0,active:a}),href:"#",onClick:e.setSelected.bind(e,t),key:t._id},n," - ",s)})))}}]),t}(n.Component),gt=Object(m.b)(function(e){return{currentViewURI:e.currentViewURI,umpireMenu:e.umpireMenu}})(bt),yt=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setSelectedSchemaId=function(e){switch(a.state.creatorType){case"templates":a.props.dispatch(De(e._id));break;case"library":a.props.dispatch(De(e.schema._id)),a.props.dispatch(ve(e._id));break;default:console.log("error")}},a.filterMessages=function(e){var t,n=e?e.target.value:a.state.searchQuery;switch(a.state.creatorType){case"templates":t=a.props.messageTypes.messages.filter(function(e){return e.details.title.toLowerCase().indexOf(n.toLowerCase())>-1});break;case"library":t=a.props.messages.messages.filter(function(e){return e.details.title.toLowerCase().indexOf(n.toLowerCase())>-1});break;default:t=[]}a.setState({messageList:t,searchQuery:n})},a.duplicateTemplate=function(){a.props.dispatch(Ae(a.props.umpireMenu.selectedSchemaID))},a.deleteTemplate=function(){a.props.dispatch(h.open("delete"))},a.duplicateMessage=function(){a.props.dispatch(be(a.props.messages.messagePreviewId))},a.deleteMessage=function(){a.props.dispatch(h.open("delete"))};var n=a.props.currentViewURI.split("/")[3];return a.state={searchQuery:"",creatorType:n,messageList:"templates"===n?a.props.messageTypes.messages:a.props.messages.messages},a.buildMessageBoard(),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(De(""))}},{key:"componentWillReceiveProps",value:function(e,t){0===this.state.searchQuery.length&&this.setState({messageList:"templates"===this.state.creatorType?e.messageTypes.messages:e.messages.messages}),e.messages.messages.length!==this.props.messages.messages.length&&setTimeout(this.filterMessages,1)}},{key:"buildMessageBoard",value:function(){switch(this.state.creatorType){case"templates":this.props.dispatch(xe());break;case"library":this.props.dispatch(function(){var e=Object(y.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(he(!0)),e.next=3,ne();case 3:a=e.sent,t(pe(a)),t(he(!1));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}},{key:"createSearchListSection",value:function(){switch(this.state.creatorType){case"templates":return[r.a.createElement(ze,{href:"/client/messageCreator/create/template",key:"templates",class:"link"},r.a.createElement(He.a,{icon:Be.d}),"Create new template"),r.a.createElement(gt,{key:"searchlist",listData:this.state.messageList,searchQuery:this.state.searchQuery,filter:this.filterMessages,selected:this.props.umpireMenu.selectedSchemaID,setSelected:this.setSelectedSchemaId,placeholder:"Select template"})];case"library":return[r.a.createElement(ze,{href:"/client/messageCreator/create/message",key:"messages",class:"link"},r.a.createElement(He.a,{icon:Be.d}),"Create new Message"),r.a.createElement(gt,{key:"searchlist",listData:this.state.messageList,searchQuery:this.state.searchQuery,filter:this.filterMessages,selected:this.props.messages.messagePreviewId,setSelected:this.setSelectedSchemaId,placeholder:"Select template"})]}}},{key:"createMessagesActions",value:function(){return this.props.messages.messagePreviewId.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{class:"link link--secondary",href:"templates"===this.state.creatorType?"/messageCreator/edit/template":"/messageCreator/edit/message"},r.a.createElement(He.a,{icon:Be.c}),"Edit"),r.a.createElement("span",{className:"link link--secondary",onClick:this.duplicateMessage},r.a.createElement(He.a,{icon:Be.b}),"Duplicate"),r.a.createElement("span",{className:"link link--secondary",onClick:this.deleteMessage},r.a.createElement(He.a,{icon:Be.g}),"Delete")):null}},{key:"createTemplatesActions",value:function(){return this.props.umpireMenu.selectedSchemaID.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{class:"link link--secondary",href:"templates"===this.state.creatorType?"/messageCreator/edit/template":"/messageCreator/edit/message"},r.a.createElement(He.a,{icon:Be.c}),"Edit"),r.a.createElement("span",{className:"link link--secondary",onClick:this.duplicateTemplate},r.a.createElement(He.a,{icon:Be.b}),"Duplicate"),r.a.createElement("span",{className:"link link--secondary",onClick:this.deleteTemplate},r.a.createElement(He.a,{icon:Be.g}),"Delete")):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("h1",null,"Message ",this.state.creatorType),r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{id:"selection",className:"flex-content"},this.createSearchListSection()),r.a.createElement("div",{id:"preview",className:"flex-content flex-content--big"},r.a.createElement("p",{className:"heading--sml"},"Preview"),"templates"===this.state.creatorType?r.a.createElement(lt,{id:"preview",disabled:!0,previewForm:!0}):r.a.createElement("div",{id:"message-preview"},r.a.createElement(pt,{detail:this.props.messages.messagePreview.details}))),r.a.createElement("div",{id:"function",className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml"},"Actions"),"templates"===this.state.creatorType?this.createTemplatesActions():this.createMessagesActions())))}}]),t}(n.Component),vt=Object(m.b)(function(e){return{messageTypes:e.messageTypes,messages:e.messages,currentViewURI:e.currentViewURI,umpireMenu:e.umpireMenu}})(yt),Ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).saveMessage=function(){a.props.dispatch(ge(a.editor.getValue(),a.props.messages.messagePreviewId))},a.editor=null,a.editorPreviewRef=r.a.createRef(),a.state={selectedSchema:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){if(this.editor&&e.umpireMenu.selectedSchemaID!==this.props.umpireMenu.selectedSchemaID&&(this.editor.destroy(),this.editor=null),e.messages.messagePreviewId.length>0||e.umpireMenu.selectedSchemaID.length>0){if(this.editor)return;this.editor=new ct.a(this.editorPreviewRef.current,{schema:e.messages.messagePreview.schema,theme:"bootstrap4"})}e.messages.messagePreview.details&&this.editor.setValue(e.messages.messagePreview.details),this.props.disabled&&this.editor&&this.editor.disable()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"button-wrap"},this.props.disabled?null:r.a.createElement("span",{onClick:this.saveMessage,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")),r.a.createElement("div",{id:"preview-editor",ref:this.editorPreviewRef}),r.a.createElement("div",{className:"button-wrap"},this.props.disabled?null:r.a.createElement("span",{onClick:this.saveMessage,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")))}}]),t}(n.Component),St=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes,selectedSchema:e.selectedSchema,umpireMenu:e.umpireMenu}})(Ot),jt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).filterMessages=function(e){var t=e.target.value,n=a.props.messages.messages.filter(function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1});a.setState({messageList:n,searchInput:t.toLowerCase()})},a.state={messageToEdit:a.props.messages.messagePreviewId,messageList:a.props.messages.messages,searchInput:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(xe())}},{key:"componentWillReceiveProps",value:function(e,t){this.props.messages.messages.length!==e.messages.messages.length&&this.setState({messageToEdit:e.messages.messagePreviewId,messageList:e.messages.messages})}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("h1",null,"Message library"),r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{id:"preview",className:"flex-content flex-content--solo-item"},r.a.createElement(St,{id:"preview",disabled:!1}))))}}]),t}(n.Component),wt=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes}})(jt),Tt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).filterMessages=function(e){var t=e.target.value,n=a.props.messageTypes.messages.filter(function(e){return e.details.title.toLowerCase().indexOf(t.toLowerCase())>-1});a.setState({messageList:n,searchQuery:t})},a.setSelectedSchemaId=function(e){a.props.dispatch(De(e._id))},a.state={messageList:a.props.messageTypes.messages,searchInput:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(fe()),this.props.dispatch(xe())}},{key:"componentWillReceiveProps",value:function(e,t){this.props.messageTypes.messages.length!==e.messageTypes.messages.length&&this.setState({messageList:e.messageTypes.messages})}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("h1",null,"Message library"),r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{id:"selection",className:"flex-content"},r.a.createElement(gt,{key:"search-templates",listData:this.state.messageList,searchQuery:this.state.searchQuery,filter:this.filterMessages,selected:this.props.umpireMenu.selectedSchemaID,setSelected:this.setSelectedSchemaId,placeholder:"Select template"})),r.a.createElement("div",{id:"preview",className:"flex-content flex-content--big"},r.a.createElement(lt,{id:"preview",disabled:!1}))))}}]),t}(n.Component),_t=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes,umpireMenu:e.umpireMenu,currentViewURI:e.currentViewURI}})(Tt),Ct=a(30),kt=a(82),Nt=a(198),Mt=a(199),At=a(200),It=a(201);function Rt(e){this.jsonEditor=null,this.renderZone="string"===typeof e?document.getElementById(e):e.current}function xt(e){Rt.call(this,e)}function Dt(e){Rt.call(this,e);var t=function(e){if(e.matches('div[data-schemapath$=".properties"] > h3 > div > button.json-editor-btntype-properties')){var t=e.parentElement.parentElement.parentElement.querySelector("h3 > span");if(t&&"properties"===t.innerText)return!0}return!1};this.observer=new MutationObserver(function(e,a){var n=!0,r=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){i.value.addedNodes.forEach(function(e){if(1===e.nodeType)if(t(e))e.querySelector("span").innerText="Add/Remove";else if(e.matches("button.json-editor-btntype-properties")){var a=e.querySelector("i");a.classList.remove("fa-pen"),a.classList.add("fa-cog"),e.querySelector("span").innerText=""}})}}catch(o){r=!0,s=o}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}}),this.observer.observe(this.renderZone,{childList:!0,subtree:!0})}Rt.prototype.destroy=function(){this.jsonEditor&&(this.jsonEditor.destroy(),this.jsonEditor=null)},Rt.prototype.updateSchema=function(e){this.destroy(),this.jsonEditor=new ct.a(this.renderZone,{schema:e})},Rt.prototype.validate=function(){return this.jsonEditor.validate()},Rt.prototype.getJSON=function(){return this.jsonEditor.getValue()},xt.prototype=Object.create(Rt.prototype),Object.defineProperty(xt.prototype,"constructor",{value:xt,enumerable:!1,writable:!0}),xt.prototype.updateSchema=function(e){this.destroy(),this.jsonEditor=new ct.a(this.renderZone,{schema:e,no_additional_properties:!0})},Dt.prototype=Object.create(Rt.prototype),Object.defineProperty(Dt.prototype,"constructor",{value:Dt,enumerable:!1,writable:!0}),Dt.prototype.updateSchema=function(e){this.destroy();this.jsonEditor=new ct.a(this.renderZone,{schema:e,custom_validators:[function(e,t,a){var n=[];return null!==t&&"integer"===t.type&&"range"===t.format&&("undefined"!==typeof t.minimum&&"undefined"!==typeof t.maximum||n.push({path:a,property:"format",message:"The range format requires that you specify both minimum and maximum properties, too."})),n},function(e,t,a){var n=[];return null===t||"integer"!==t.type&&"number"!==t.type||"undefined"!==typeof t.minimum&&"undefined"!==typeof t.minimum&&t.minimum>t.maximum&&n.push({path:a,property:"maximum",message:"The maximum value must be greater than or equal than the minimum value."}),n}]});this.jsonEditor.on("ready",function(){var e=this.root.getButton("Save","save","Save"),t=this.root.theme.getHeaderButtonHolder();t.appendChild(e),this.root.header.parentNode.insertBefore(t,this.root.header.nextSibling);var a=this;e.addEventListener("click",function(e){e.preventDefault();var t=a.getValue(),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,"schema.json");else{var r=document.createElement("a");r.download="schema.json",r.href=URL.createObjectURL(n),r.dataset.downloadurl=["text/plain",r.download,r.href].join(":"),r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))}},!1)})};var Pt=function(e){function t(e,a){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e,a))).schemaEditor=null,n.editorBox=r.a.createRef(),n.onChange=n.onChange.bind(Object(Ct.a)(Object(Ct.a)(n))),n.updateEditor=n.updateEditor.bind(Object(Ct.a)(Object(Ct.a)(n))),n.saved="",n.value=n.props.defaultValue,n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"onChange",value:function(e,t){var a=this.schemaEditor.validate();console.log(a),a.length?alert("Invalid schema"):this.props.onChange&&(this.value=this.schemaEditor.jsonEditor.getValue(),this.props.onChange(this.schemaEditor.getJSON()))}},{key:"componentDidMount",value:function(){this.schemaEditor=new Dt(this.editorBox),this.updateEditor(this.props.schema,this.props.options)}},{key:"componentWillReceiveProps",value:function(e){var t=e.schema,a=e.options;this.updateEditor(t,a)}},{key:"updateEditor",value:function(e,t){try{var a=JSON.stringify(e);a===this.save&&t.counter===this.props.options.counter||(ct.a.defaults.options.object_layout=t.layout,ct.a.defaults.options=Object(st.a)({},ct.a.defaults.options,t.booleanOptions),this.save=a,this.schemaEditor.updateSchema(e),this.schemaEditor.jsonEditor.setValue(this.value),this.schemaEditor.jsonEditor.on("change",this.onChange))}catch(n){alert("Invalid json schema"),console.log(n)}}},{key:"render",value:function(){return r.a.createElement(Nt.a,null,r.a.createElement(Mt.a,null,"Schema Editor"),r.a.createElement(At.a,null,r.a.createElement("div",{id:"schema-editor",ref:this.editorBox})),r.a.createElement(It.a,null))}}]),t}(n.Component),Lt=function(e){function t(e,a){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e,a))).previewBox=r.a.createRef(),n.editorPreview=null,n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.editorPreview=new xt(this.previewBox)}},{key:"componentWillReceiveProps",value:function(e){var t=e.schema;this.editorPreview.destroy(),null!==t&&this.editorPreview.updateSchema(t)}},{key:"render",value:function(){return r.a.createElement(Nt.a,null,r.a.createElement(Mt.a,null,"Editor Preview"),r.a.createElement(At.a,null,r.a.createElement("div",{id:"editor-preview",ref:this.previewBox})),r.a.createElement(It.a,null,"The Editor Preview will be updated as you make changes in the Schema Editor"))}}]),t}(n.Component),Ft=(a(165),function(e){function t(e,a){var n;return Object(c.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e,a)),ct.a.defaults.options.iconlib="fontawesome5",ct.a.defaults.options.theme="bootstrap4",n.updateMetaSchema=n.updateMetaSchema.bind(Object(Ct.a)(Object(Ct.a)(n))),n.updatePreviewSchema=n.updatePreviewSchema.bind(Object(Ct.a)(Object(Ct.a)(n))),n.updateOptions=n.updateOptions.bind(Object(Ct.a)(Object(Ct.a)(n))),n.schemaEditor=null,n.editorPreview=null,n.defaultValue={type:"object",properties:{title:{type:"string"},Date:{type:"string",format:"datetime-local"},Status:{type:"string",enum:["Minor","Major","Critical"]},Description:{type:"string",format:"textarea"}},title:"Machinery Failure",format:"grid"},n.props.schemaId&&(n.defaultValue=n.props.messageTypes.messages.find(function(e){return e._id===n.props.schemaId}).details),n.state={metaSchema:kt,previewSchema:null,options:{layout:ct.a.defaults.options.object_layout,booleanOptions:{}}},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"updatePreviewSchema",value:function(e){console.log("preview update"),this.setState({previewSchema:e}),this.props.dispatch(Pe(e))}},{key:"updateOptions",value:function(e){console.log("options update"),this.setState({options:e})}},{key:"updateMetaSchema",value:function(e){console.log("editor update"),this.setState({metaschema:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex-content flex-content--left50"},r.a.createElement(Pt,{schema:this.state.metaSchema,onChange:this.updatePreviewSchema,options:this.state.options,defaultValue:this.defaultValue})),r.a.createElement("div",{className:"flex-content flex-content--right50"},r.a.createElement(Lt,{schema:this.state.previewSchema})))}}]),t}(n.Component)),Gt=Object(m.b)(function(e){return{umpireMenu:e.umpireMenu}})(Ft),Wt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).filterMessages=function(e){var t=e.target.value,n=a.props.messageTypes.messages.filter(function(e){return e.details.title.toLowerCase().indexOf(t.toLowerCase())>-1});a.setState({messageList:n,searchInput:t.toLowerCase()})},a.updateSchema=function(){a.props.dispatch(Ie(a.props.umpireMenu.previewSchema,a.props.umpireMenu.selectedSchemaID))},a.state={messageList:a.props.messageTypes.messages,searchInput:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(fe()),this.props.dispatch(xe())}},{key:"componentWillReceiveProps",value:function(e,t){this.props.messageTypes.messages.length!==e.messageTypes.messages.length&&this.setState({messageList:e.messageTypes.messages})}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("h1",null,"Message template"),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("span",{onClick:this.updateSchema,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")),r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement(Gt,{schemaId:this.props.umpireMenu.selectedSchemaID,messageTypes:this.props.messageTypes})),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("span",{onClick:this.updateSchema,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")))}}]),t}(n.Component),Ut=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes,currentViewURI:e.currentViewURI,umpireMenu:e.umpireMenu}})(Wt),Vt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).saveSchema=function(){a.props.dispatch(Me(a.props.umpireMenu.previewSchema))},a.state={messageList:a.props.messageTypes.messages,searchInput:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(fe()),this.props.dispatch(xe())}},{key:"componentWillReceiveProps",value:function(e,t){this.props.messageTypes.messages.length!==e.messageTypes.messages.length&&this.setState({messageList:e.messageTypes.messages})}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("h1",null,"Message template"),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("span",{onClick:this.saveSchema,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")),r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement(Gt,null)),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("span",{onClick:this.saveSchema,className:"link"},r.a.createElement(He.a,{icon:Be.e}),"Save Message")))}}]),t}(n.Component),Bt=Object(m.b)(function(e){return{messages:e.messages,messageTypes:e.messageTypes,currentViewURI:e.currentViewURI,umpireMenu:e.umpireMenu}})(Vt),Ht=a(22),$t=a(205),qt=a(204),Yt=a(203),Qt=a(202),Jt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.props.updateStore(e.target.value)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("select",{disabled:this.props.disabled,value:this.props.data?this.props.data:"placeholder",onChange:this.onChange},r.a.createElement("option",{value:"placeholder"},this.props.placeholder),this.props.selectOptions.map(function(e,t){return r.a.createElement("option",{key:"".concat(e).concat(t),value:e},e)}))}}]),t}(n.Component),zt=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-content flex-content--row"},this.props.children)}}]),t}(n.Component),Zt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.props.updateStore(e.target.value)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("textarea",{value:this.props.data,onChange:this.onChange,style:{resize:"none"}})}}]),t}(n.Component),Kt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateDescription=function(e){a.props.dispatch(G({gameDescription:e}))},a.updateSpatialRepresentation=function(e){a.props.dispatch(G({spatialRepresentation:e}))},a.updatePlanningInterval=function(e){a.props.dispatch(G({planningInterval:e}))},a.updateReplayInterval=function(e){a.props.dispatch(G({replayInterval:e}))},a.updateTurnStrategy=function(e){a.props.dispatch(G({turnStrategy:e}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content flex-content--left50"},r.a.createElement("p",{className:"heading--sml"},"Game description & objectives"),r.a.createElement(Zt,{updateStore:this.updateDescription,data:this.props.wargame.tabs[this.props.wargame.currentTab].data.gameDescription})),r.a.createElement("div",{className:"flex-content flex-content--right50"},r.a.createElement(zt,null,r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml"},"Spatial Representation")),r.a.createElement("div",{className:"flex-content flex-content--fill"},r.a.createElement(Jt,{updateStore:this.updateSpatialRepresentation,selectOptions:["opt1","opt2","opt3"],placeholder:"Select spatial representation",data:this.props.wargame.tabs[this.props.wargame.currentTab].data.spatialRepresentation}))),r.a.createElement(zt,null,r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml"},"Planning Interval")),r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement(Et,{updateStore:this.updatePlanningInterval,options:{numInput:!0},data:this.props.wargame.tabs[this.props.wargame.currentTab].data.planningInterval,validInput:!0})),r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml heading--mleft"},"min."))),r.a.createElement(zt,null,r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml"},"Replay interval")),r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement(Et,{updateStore:this.updateReplayInterval,options:{numInput:!0},data:this.props.wargame.tabs[this.props.wargame.currentTab].data.replayInterval,validInput:!0})),r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml heading--mleft"},"min."))),r.a.createElement(zt,null,r.a.createElement("div",{className:"flex-content flex-content--sml"},r.a.createElement("p",{className:"heading--sml"},"Turn Strategy")),r.a.createElement("div",{className:"flex-content flex-content--fill"},r.a.createElement(Jt,{updateStore:this.updateTurnStrategy,selectOptions:["opt1","opt2","opt3"],placeholder:"Not implemented yet",data:this.props.wargame.tabs[this.props.wargame.currentTab].data.turnStrategy})))))}}]),t}(n.Component),Xt=Object(m.b)(function(e){return{wargame:e.wargame}})(Kt),ea=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setSelected=function(e){a.props.setSelected(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"createList",value:function(){var e=this.props.listData,t=[];for(var a in e){var n=a===this.props.selected?"active":"";t.unshift(r.a.createElement("span",{href:"#",onClick:this.setSelected.bind(this,a),key:a,className:dt()({"list-title":!0,active:n})},a))}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"list"},!!this.props.filter&&r.a.createElement("input",{type:"text",className:"list-input",key:"search-templates",placeholder:this.props.placeholder,onChange:this.props.filter,value:this.props.searchQuery}),r.a.createElement("div",{className:"list-list"},this.createList()))}}]),t}(n.Component),ta=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"group-item",key:this.props.children},this.props.children,r.a.createElement(He.a,{icon:Be.f}))}}]),t}(n.Component),aa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).openModal=function(){a.props.dispatch(h.open("addForce"))},a.setSelected=function(e){a.props.dispatch(V(e))},a.updateOverview=function(e){a.props.dispatch($(e))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"createForceEditor",value:function(){var e=this.props.wargame.currentTab,t=this.props.wargame.tabs[e].data.selectedForce;return r.a.createElement("div",{className:"flex-content--fill forcesTab"},r.a.createElement("h3",null,t),r.a.createElement("span",{className:"link link--secondary link--noIcon link--disabled"},"Change icon"),r.a.createElement("p",{className:"heading--sml"},"Overview & Objectives"),r.a.createElement(Zt,{updateStore:this.updateOverview,data:this.props.wargame.tabs[e].data.forces[t].overview}),r.a.createElement("p",{className:"heading--sml"},"Roles"),r.a.createElement("span",{className:"link link--secondary link--noIcon link--disabled"},"Add a new role"),r.a.createElement("div",{className:"flex-content"},this.props.wargame.tabs[e].data.forces[t].roles.map(function(e){return r.a.createElement(ta,{key:e},e)})))}},{key:"render",value:function(){var e=this.props.wargame.currentTab,t=this.props.wargame.tabs[e].data.selectedForce;return r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content"},r.a.createElement("span",{className:"link link--noIcon",onClick:this.openModal},"Add a new force"),r.a.createElement(ea,{listData:this.props.wargame.tabs[e].data.forces,setSelected:this.setSelected,selected:t})),t?this.createForceEditor():null)}}]),t}(n.Component),na=Object(m.b)(function(e){return{messages:e.messages,wargame:e.wargame}})(aa),ra=a(42),sa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateSubscriptionForce=function(e){a.setState({editSubscriptionForce:e})},a.updateSubscriptionRole=function(e){a.setState({editSubscriptionRole:e})},a.updateSubscriptionTemplates=function(e){a.setState({editSubscriptionTemplates:e})},a.updateChannel=function(){var e={force:a.state.editSubscriptionForce.label,role:a.state.editSubscriptionRole.label,templates:a.state.editSubscriptionTemplates};a.props.updateRecipient(a.state.subscriptionId,e),a.props.cancelEdit()},a.state={subscriptionId:a.props.data.subscriptionId,editSubscriptionForce:{value:a.props.data.force,label:a.props.data.force},editSubscriptionRole:{value:a.props.data.role,label:a.props.data.role},editSubscriptionTemplates:a.props.data.templates},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.editSubscriptionForce,options:this.props.forceOptions,onChange:this.updateSubscriptionForce})),r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.editSubscriptionRole,options:this.props.roleOptions,onChange:this.updateSubscriptionRole})),r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.editSubscriptionTemplates,options:this.props.templateOptions,onChange:this.updateSubscriptionTemplates,isMulti:!0})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-action btn-action--secondary",onClick:this.updateChannel},"Save")))}}]),t}(n.Component),ia=Object(m.b)()(sa),ca=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).cancelEdit=function(){a.setState({subscriptionToEdit:""})},a.updateRecipient=function(e,t){a.props.dispatch(J(e,t))},a.setSelectedForce=function(e){a.setState({selectedForce:e})},a.setSelectedRole=function(e){a.setState({selectedRole:e})},a.setSelectedTemplate=function(e){a.setState({selectedTemplates:e})},a.addToChannel=function(){var e={force:a.state.selectedForce.value,role:a.state.selectedRole.value,templates:a.state.selectedTemplates};a.props.dispatch(Q(e)),a.setState({selectedForce:{value:null,label:null},selectedRole:{value:null,label:null},selectedTemplates:[]})};var n=Object.values(a.props.wargame.tabs).find(function(e){return"Forces"===e.name}).data.forces,r=[];for(var s in n)r.push({value:s,label:s});var i=a.props.messageTypes.messages.map(function(e){return{value:e._id,label:e.title}});return a.state={selectedForce:{value:null,label:null},forceOptions:r,selectedRole:{value:null,label:null},roleOptions:[],selectedTemplates:[],templateOptions:i,subscriptionToEdit:null,editSubscriptionForce:"",editSubscriptionRole:"",editSubscriptionTemplates:[]},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){if(null!==t.selectedForce.value&&this.state.selectedForce.value!==t.selectedForce.value){var n=Object.values(this.props.wargame.tabs),r=[];n.find(function(e){return"Forces"===e.name}).data.forces[t.selectedForce.value].roles.forEach(function(e){r.push({value:e,label:e})}),this.setState({roleOptions:r})}}},{key:"createRow",value:function(e,t){var a=[];for(var n in e)if("subscriptionId"!==n){var s="";"string"!==typeof e[n]?e[n].forEach(function(t,a){s+=t.label,a!==e[n].length-1&&(s+=", ")}):s=e[n],a.push(r.a.createElement("td",{key:"".concat(s,"i")},s))}return a.push(r.a.createElement("td",{key:"edit-delete".concat(t)},r.a.createElement(He.a,{icon:Be.g,onClick:this.removeSubscription.bind(this,e.subscriptionId)}),r.a.createElement(He.a,{icon:Be.c,onClick:this.editSubscription.bind(this,e.subscriptionId)}))),r.a.createElement("tr",{key:"row-".concat(t)},a)}},{key:"removeSubscription",value:function(e){var t;this.props.dispatch((t=e,{type:d.REMOVE_RECIPIENT,payload:t}))}},{key:"editSubscription",value:function(e){this.setState({subscriptionToEdit:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex-content"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Force"),r.a.createElement("th",null,"Roles"),r.a.createElement("th",null,"Templates"))),r.a.createElement("tbody",null,this.props.data.map(function(t,a){return t.subscriptionId===e.state.subscriptionToEdit?r.a.createElement(ia,{key:t.subscriptionId,data:t,forceOptions:e.state.forceOptions,roleOptions:e.state.roleOptions,templateOptions:e.state.templateOptions,cancelEdit:e.cancelEdit,updateRecipient:e.updateRecipient}):e.createRow(t,a)}),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.selectedForce,options:this.state.forceOptions,onChange:this.setSelectedForce})),r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.selectedRole,options:this.state.roleOptions,onChange:this.setSelectedRole,isDisabled:!this.state.selectedForce.value})),r.a.createElement("td",null,r.a.createElement(ra.a,{value:this.state.selectedTemplates,options:this.state.templateOptions,onChange:this.setSelectedTemplate,isDisabled:!this.state.selectedRole.value,isMulti:!0})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-action btn-action--secondary",onClick:this.addToChannel,disabled:!this.state.selectedTemplates.length>0},"Save"))))))}}]),t}(n.Component),oa=Object(m.b)(function(e){return{wargame:e.wargame,messageTypes:e.messageTypes}})(ca),la=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).openModal=function(){a.props.dispatch(h.open("addChannel"))},a.setSelected=function(e){a.props.dispatch(H(e))},a.updateOverview=function(e){a.props.dispatch($(e))},a.filterChannels=function(e){var t=e.target.value,n=a.props.wargame.tabs[a.props.wargame.currentTab].data.channels,r={};for(var s in n)s.toLowerCase().indexOf(t.toLowerCase())>-1&&(r[s]=n[s]);a.setState({channelList:r,searchQuery:t})},a.state={channelList:a.props.wargame.tabs[a.props.wargame.currentTab].data.channels,searchQuery:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var a=Object.keys(this.props.wargame.tabs[this.props.wargame.currentTab].data.channels),n=Object.keys(e.wargame.tabs[e.wargame.currentTab].data.channels);a.length!==n.length&&this.setState({channelList:e.wargame.tabs[e.wargame.currentTab].data.channels})}},{key:"createChannelEditor",value:function(){var e=this.props.wargame.currentTab,t=this.props.wargame.tabs[e].data.selectedChannel;return r.a.createElement("div",{className:"flex-content--fill channelsTab"},r.a.createElement("h3",null,t),r.a.createElement("p",{className:"heading--sml"},"Participants and messages"),r.a.createElement(oa,{data:this.props.wargame.tabs[e].data.channels[t]}))}},{key:"render",value:function(){var e=this.props.wargame.currentTab,t=this.props.wargame.tabs[e].data.selectedChannel;return r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content"},r.a.createElement("span",{className:"link link--noIcon",onClick:this.openModal},"Add channel"),r.a.createElement(ea,{listData:this.state.channelList,filter:this.filterChannels,searchQuery:this.state.searchQuery,setSelected:this.setSelected,selected:t,placeholder:"Search channels"})),t?this.createChannelEditor():null)}}]),t}(n.Component),ua=Object(m.b)(function(e){return{messages:e.messages,wargame:e.wargame}})(la);function pa(e){return r.a.createElement(Qt.a,{component:"div",style:{padding:24}},e.children)}var ma=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t}),a.props.setCurrentTab(t)},console.log(a.props.tabs),a.state={value:0,tabs:Object.values(a.props.tabs).map(function(e){return e.name}),invalidFields:[]},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.setCurrentTab(0)}},{key:"render",value:function(){var e=this.state.value,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement($t.a,{position:"static",color:"default"},r.a.createElement(qt.a,{value:e,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},this.state.tabs.map(function(e,t){return r.a.createElement(Yt.a,{key:e+t,label:e})}))),0===e&&r.a.createElement(pa,null,r.a.createElement(Xt,null)),1===e&&r.a.createElement(pa,null,r.a.createElement(na,null)),2===e&&r.a.createElement(pa,null,r.a.createElement(ua,null))),r.a.createElement(ft,{validation:this.props.wargame.validation}))}}]),t}(n.Component),da=Object(m.b)(function(e){return{wargame:e.wargame}})(Object(Ht.a)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}})(ma)),ha=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"progress"},this.props.children)}}]),t}(n.Component),fa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setCurrentTab=function(e){a.props.dispatch(F(e))},a.updateWargameTitle=function(e){a.props.dispatch(W(e))},a.saveWargame=function(){a.checkAllValid()&&a.props.dispatch(Z(a.props.wargame.currentWargame,a.props.wargame.tabs,a.props.wargame.wargameTitle))},a.checkAllValid=function(){return Object.values(a.props.wargame.validation).reduce(function(e){return!0===e})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(xe())}},{key:"createIndicators",value:function(){var e=this;return Object.entries(this.props.wargame.tabs).map(function(t){var a=e.props.wargame.currentTab===parseInt(t[0]),n=t[1].complete;return r.a.createElement("div",{key:t[0],className:dt()("progress-indicator",{"progress-indicator--active":a,"progress-indicator--complete":n})})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"view-wrapper"},r.a.createElement("div",{id:"sidebar"},r.a.createElement(ze,{href:"/client/umpireMenu",id:"home-btn"},r.a.createElement(He.a,{icon:Be.a,size:"2x"}))),r.a.createElement("div",{className:"flex-content-wrapper flex-content-wrapper--distribute"},r.a.createElement(Et,{id:"title-editable",updateStore:this.updateWargameTitle,options:{numInput:!1},data:this.props.wargame.wargameTitle,validInput:this.props.wargame.validation.validWargameName}),r.a.createElement("span",{className:dt()({link:!0,"link--noIcon":!0,"link--disabled":!this.checkAllValid()}),onClick:this.saveWargame},"save"),r.a.createElement(ha,null,this.createIndicators())),r.a.createElement(da,{tabs:this.props.wargame.tabs,setCurrentTab:this.setCurrentTab})))}}]),t}(n.Component),Ea=Object(m.b)(function(e){return{wargame:e.wargame}})(fa),ba=function(e){return{type:d.SET_FORCE,payload:e}},ga=function(e){return{type:d.SET_ROLE,payload:e}},ya=function(){return{type:d.SET_FILTERED_CHANNELS}},va=function(e){return{type:d.SET_CHANNEL,payload:e}},Oa=function(e){return{type:d.SET_MESSAGE_SCHEMA,payload:e}},Sa=function(e){return{type:d.SET_LATEST_MESSAGES,payload:e}},ja=function(e,t,a){return function(){var n=Object(y.a)(g.a.mark(function n(r){var s,i;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(e,t,a);case 2:return n.sent,n.next=5,D();case 5:return s=n.sent,n.next=8,L(s.name);case 8:i=n.sent,r(Sa(i));case 10:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},wa=function(e){return function(){var t=Object(y.a)(g.a.mark(function t(a){var n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te();case 2:n=t.sent,r=n.find(function(t){return t._id===e}),a(Oa(r.details));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Ta=function(){return function(){var e=Object(y.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:return a=e.sent,e.next=5,L(a.name);case 5:n=e.sent,t(Sa(n));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},_a=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages.filter(function(t){return t.channel===e.props.curChannel});return console.log(t),r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement(pt,{key:t,detail:e.message})}))}}]),t}(n.Component),Ca=Object(m.b)(function(e){return Object(Qe.a)(e),{}})(_a),ka=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).sendMessage=function(){var e=a.props.wargame.allChannels[a.props.wargame.selectedChannel],t=w.a.uniqBy(w.a.flatMap(e,function(e){return e.templates}),w.a.isEqual);t=t.map(function(e){return e.value});var n=a.props.wargame.allChannels[a.props.wargame.selectedChannel].map(function(e){return e.force}),r=a.props.wargame.selectedForce;a.props.dispatch(ja(a.props.wargame.currentWargame,{templates:t,to:n,from:r},a.editor.getValue())),a.props.dispatch(Ta())},a.editor=null,a.editorPreviewRef=r.a.createRef(),a.state={selectedSchema:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){if(this.editor&&(this.editor.destroy(),this.editor=null),e.schema&&e.schema.type){if(this.editor)return;this.editor=new ct.a(this.editorPreviewRef.current,{schema:e.schema,theme:"bootstrap4"})}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"preview-editor",ref:this.editorPreviewRef}),r.a.createElement("button",{name:"send",className:"btn btn-action btn-action--primary",onClick:this.sendMessage},"Send"))}}]),t}(n.Component),Na=Object(m.b)(function(e){return{wargame:e.wargame}})(ka),Ma=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setTemplate=function(e){a.props.dispatch(wa(e.value)),a.setState({template:e})},a.state={template:{value:"",label:""}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.props.curChannel!==e.curChannel&&this.setState({template:{value:"",label:""}})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{value:this.state.template,options:this.props.templates,onChange:this.setTemplate}),r.a.createElement(Na,{schema:this.props.schema}))}}]),t}(n.Component),Aa=Object(m.b)(function(e){return Object(Qe.a)(e),{}})(Ma);function Ia(e){return r.a.createElement(Qt.a,{component:"div",style:{padding:24}},e.children)}var Ra=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){var n=Object.keys(a.props.playerUi.channels)[t];a.props.dispatch(va(n)),a.props.dispatch(Oa({})),a.setState({value:t})},a.createTabs=function(){var e=a.props.playerUi.channels,t=[];for(var n in e)t.push(r.a.createElement(Yt.a,{key:n,label:n}));return t},a.createMessageList=function(e){var t=a.props.playerUi.selectedChannel;return r.a.createElement(Ia,null,r.a.createElement(Ca,{curChannel:t,messages:a.props.playerUi.messages}),r.a.createElement(Aa,{curChannel:t,schema:a.props.playerUi.messageSchema,templates:a.props.playerUi.channels[t].templates}))},a.state={value:0},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.value,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement($t.a,{position:"static",color:"default"},r.a.createElement(qt.a,{value:e,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},this.createTabs())),this.createMessageList(e)))}}]),t}(n.Component),xa=Object(m.b)(function(e){return{playerUi:e.playerUi}})(Object(Ht.a)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}})(Ra)),Da=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateSelectedForce=function(e){a.props.dispatch(ba(e))},a.updateSelectedRole=function(e){a.props.dispatch(ga(e)),a.props.dispatch(ya())},a.goBack=function(){a.props.dispatch(ba(""))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(function(){var e=Object(y.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return e.sent,e.next=5,D();case 5:a=e.sent,t((n=a,{type:d.SET_CURRENT_WARGAME_PLAYER,payload:n}));case 7:case"end":return e.stop()}var n},e)}));return function(t){return e.apply(this,arguments)}}()),this.props.dispatch(Ta())}},{key:"render",value:function(){return r.a.createElement("div",{className:"flex-content-wrapper"},r.a.createElement("div",{className:"flex-content flex-content--fill"},!this.props.playerUi.selectedForce&&r.a.createElement("div",{className:"flex-content--center"},r.a.createElement("h1",null,"Set force"),r.a.createElement(Jt,{updateStore:this.updateSelectedForce,selectOptions:Object.keys(this.props.playerUi.allForces)})),!(!this.props.playerUi.selectedForce||this.props.playerUi.selectedRole)&&r.a.createElement("div",{className:"flex-content--center"},r.a.createElement("h1",null,"Set role"),r.a.createElement(He.a,{icon:Be.a,size:"2x",style:{cursor:"pointer"},onClick:this.goBack}),r.a.createElement(Jt,{updateStore:this.updateSelectedRole,selectOptions:this.props.playerUi.allForces[this.props.playerUi.selectedForce].roles})),!(!this.props.playerUi.selectedForce||!this.props.playerUi.selectedRole)&&r.a.createElement(xa,null)))}}]),t}(n.Component),Pa=Object(m.b)(function(e){return{playerUi:e.playerUi}})(Da),La=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).routes=[{path:"/client/",action:function(){return r.a.createElement(Ke,null)}},{path:"/client/umpireMenu",action:function(){return r.a.createElement(rt,null)}},{path:"/client/umpireMenu/:creatorType",action:function(){return r.a.createElement(vt,null)}},{path:"/client/messageCreator",children:[{path:"/create/template",action:function(){return r.a.createElement(Bt,null)}},{path:"/edit/template",action:function(){return r.a.createElement(Ut,null)}},{path:"/create/message",action:function(){return r.a.createElement(_t,null)}},{path:"/edit/message",action:function(){return r.a.createElement(wt,null)}}]},{path:"/client/gameSetup",action:function(){return r.a.createElement(Ea,null)}},{path:"/client/playerUi",action:function(){return r.a.createElement(Pa,null)}}],a.state={currentView:r.a.createElement(Ke,null)},a.router=new Ye.a(a.routes),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.router.resolve({pathname:e.currentViewURI}).then(function(e){a.setState({currentView:e})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.currentView)}}]),t}(n.Component),Fa=Object(m.b)(function(e){return{currentViewURI:e.currentViewURI}})(La),Ga=a(50);function Wa(e){if(null===e||"object"!==typeof e)return e;var t=e.constructor();for(var a in e)t[a]=Wa(e[a]);return t}var Ua={isLoading:!1,messages:[]},Va={isLoading:!1,messages:[],messagePreviewId:"",messagePreview:{}},Ba={selectedSchemaID:"",previewSchema:{}},Ha={isLoading:!1,wargameList:[],currentWargame:"",wargameTitle:"",validation:{validWargameName:!0},tabs:{0:{name:"Overview - settings",data:{gameDescription:"",spatialRepresentation:"",planningInterval:null,replayInterval:null,turnStrategy:""},complete:!1},1:{name:"Forces",data:{forces:{},selectedForce:"",roles:[]},complete:!1},2:{name:"Channels",data:{channels:{},selectedChannel:""},complete:!1}},currentTab:0},$a={open:!1,message:""};var qa={selectedForce:"",selectedRole:"",selectedChannel:"",currentWargame:"",wargameTitle:"",channels:{},allChannels:{},forces:{},allForces:{},messageSchema:{},messages:[]},Ya=[a(90).a],Qa=Object(Ga.d)(Object(Ga.c)({messageTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0,a=Wa(e);switch(t.type){case d.DB_MESSAGE_TYPES_GET:return a.isLoading=t.isLoading,a;case d.DB_MESSAGE_TYPES_SAVED:return a.messages=t.payload,a;default:return a}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0,a=Wa(e);switch(t.type){case d.DB_MESSAGES_GET:return a.isLoading=t.isLoading,a;case d.DB_MESSAGE_SAVED:return a.messages=t.payload,a;case d.DB_RETURNED_MESSAGE:return a.messagePreviewId=t.payload._id,a.messagePreview=t.payload,a;case d.RESET_MESSAGE_PREVIEW:return a.messagePreviewId="",a.messagePreview={},a;default:return a}},umpireMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0,a=Wa(e);switch(t.type){case d.SET_SELECTED_SCHEMA:return a.selectedSchemaID=t.payload,a;case d.SET_PREVIEW_SCHEMA:return a.previewSchema=t.payload,a;default:return a}},currentViewURI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case d.SET_CURRENT_VIEW_FROM_URI:return window.history.pushState({},"",t.payload),a=t.payload;default:return a}},currentModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Wa(e);switch(t.type){case d.OPEN_MODAL:case d.CLOSE_MODAL:return t.payload;default:return{}}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0,a=Wa(e);switch(t.type){case d.SHOW_NOTIFICATION:case d.HIDE_NOTIFICATION:return a=t.payload;default:return a}},wargame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0,a=Wa(e),n=a.currentTab;switch(t.type){case d.ALL_WARGAME_NAMES_SAVED:return a.wargameList=t.payload,a;case d.SET_CURRENT_WARGAME:return a.currentWargame=t.payload.name,a.wargameTitle=t.payload.wargameTitle,a.tabs=t.payload.tabs,a;case d.SET_WARGAME_NAME:var r=[];a.wargameList.forEach(function(e){e.name!==a.currentWargame&&r.push(e)});var s=r.every(function(e){return e.title!==t.payload});return a.validation.validWargameName=s,a.wargameTitle=t.payload,a;case d.SET_CURRENT_GAME_SETUP_TAB:a.currentTab=t.payload;break;case d.SET_GAME_SETUP_DATA:a.tabs[n].data=Object(st.a)({},a.tabs[n].data,t.payload);break;case d.ADD_NEW_FORCE:a.tabs[n].data.forces[t.payload]=N;break;case d.SET_SELECTED_FORCE:a.tabs[n].data.selectedForce=t.payload;break;case d.ADD_NEW_CHANNEL:a.tabs[n].data.channels[t.payload]=M;break;case d.SET_SELECTED_CHANNEL:a.tabs[n].data.selectedChannel=t.payload;break;case d.SET_FORCE_OVERVIEW:var i=a.tabs[n].data.selectedForce;a.tabs[n].data.forces[i].overview=t.payload;break;case d.ADD_NEW_RECIPIENT:var c=a.tabs[n].data.selectedChannel,o=Object(st.a)({},t.payload,{subscriptionId:_.a.time()});a.tabs[n].data.channels[c].push(o);break;case d.UPDATE_RECIPIENT:c=a.tabs[n].data.selectedChannel;var l=a.tabs[n].data.channels[c].findIndex(function(e){return e.subscriptionId===t.payload.id});a.tabs[n].data.channels[c].splice(l,1,Object(st.a)({},t.payload.data,{subscriptionId:t.payload.id}));break;case d.REMOVE_RECIPIENT:c=a.tabs[n].data.selectedChannel,l=a.tabs[n].data.channels[c].findIndex(function(e){return e.subscriptionId===t.payload}),a.tabs[n].data.channels[c].splice(l,1);break;default:return a}var u=w.a.flatMapDeep(a.tabs[n].data,function e(t){return w.a.isEmpty(t)?null:w.a.isArray(t)||w.a.isObject(t)?w.a.flatMapDeep(t,e):t});return a.tabs[n].complete=u.every(function(e){return null!==e&&e.length>0}),a},playerUi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0,a=function e(t){if(null===t||"object"!==typeof t)return t;var a=t.constructor();for(var n in t)a[n]=e(t[n]);return a}(e);switch(t.type){case d.SET_CURRENT_WARGAME_PLAYER:a.currentWargame=t.payload.name,a.wargameTitle=t.payload.wargameTitle;var n=Object.values(t.payload.tabs).find(function(e){return"Channels"===e.name});a.allChannels=n.data.channels;var r=Object.values(t.payload.tabs).find(function(e){return"Forces"===e.name});a.allForces=r.data.forces;break;case d.SET_FORCE:a.selectedForce=t.payload;break;case d.SET_ROLE:a.selectedRole=t.payload;break;case d.SET_FILTERED_CHANNELS:var s={};for(var i in a.allChannels){var c=a.allChannels[i].filter(function(e){return e.force===a.selectedForce&&e.role===a.selectedRole}),o=a.allChannels[i].some(function(e){return e.force===a.selectedForce&&e.role===a.selectedRole});c=w.a.uniqWith(c,w.a.isEqual),o&&(s[i]={templates:w.a.flatMap(c,function(e){return e.templates}),messages:[]})}a.selectedChannel=Object.keys(s)[0],a.channels=s;break;case d.SET_CHANNEL:a.selectedChannel=t.payload;break;case d.SET_MESSAGE_SCHEMA:a.messageSchema=t.payload;break;case d.SET_LATEST_MESSAGES:a.messages=t.payload;break;default:return a}return a}}),Ga.a.apply(void 0,Ya)),Ja=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:Qa},r.a.createElement(Fa,null),r.a.createElement(Ve,null),r.a.createElement(qe,null))}}]),t}(n.Component);i.a.render(r.a.createElement(Ja,null),document.getElementById("root"))},82:function(e){e.exports={$ref:"#/definitions/object",title:"object type",definitions:{string:{required:["type"],defaultProperties:["type","title"],additionalProperties:!1,title:"string type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"string"},format:{type:"string",enum:["color","date","datetime","datetime-local","email","month","number","range","tel","text","textarea","time","url","week","json","sql","xml","yaml"]},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["string"]},enum:{format:"table",items:{title:"alternative",type:"string"},type:"array"},description:{type:"string"}}},null:{required:["type"],defaultProperties:["type","title"],additionalProperties:!1,title:"null type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"null"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["null"]},description:{type:"string"}}},array:{required:["type"],defaultProperties:["type","items","title"],additionalProperties:!1,title:"array type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"array"},format:{default:"table",type:"string",enum:["array","table","tabs","tabs-top","checkbox","select","categories"]},items:{$ref:"#/definitions/schema"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["array"]},description:{type:"string"}}},schema:{default:{type:"object"},oneOf:[{$ref:"#/definitions/null",title:"null type"},{$ref:"#/definitions/boolean",title:"boolean type"},{$ref:"#/definitions/string",title:"string type"},{$ref:"#/definitions/integer",title:"integer type"},{$ref:"#/definitions/number",title:"number type"},{$ref:"#/definitions/object",title:"object type"},{$ref:"#/definitions/array",title:"array type"}],options:{keep_oneof_values:!1},type:"object"},boolean:{required:["type"],defaultProperties:["type","title"],additionalProperties:!1,title:"boolean type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"boolean"},format:{type:"string",enum:["select","checkbox"]},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["boolean"]},description:{type:"string"}}},object:{required:["type"],defaultProperties:["type","properties","title"],additionalProperties:!1,title:"object type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"object"},format:{type:"string",enum:["grid"]},required:{uniqueItems:!0,format:"table",items:{title:"property",type:"string"},type:"array"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["object"]},description:{type:"string"},properties:{type:"object",patternProperties:{".*":{$ref:"#/definitions/propertySchema"}}}}},number:{required:["type"],defaultProperties:["type","title"],additionalProperties:!1,title:"number type",type:"object",properties:{$ref:{format:"uri",type:"string"},maximum:{type:"number"},default:{type:"number"},minimum:{type:"number"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["number"]},enum:{format:"table",items:{title:"alternative",type:"number"},type:"array"},description:{type:"string"}}},integer:{required:["type"],defaultProperties:["type","title"],additionalProperties:!1,title:"integer type",type:"object",properties:{$ref:{format:"uri",type:"string"},maximum:{type:"integer"},default:{type:"integer"},minimum:{type:"integer"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},title:{type:"string",propertyOrder:1},type:{options:{hidden:!0},type:"string",enum:["integer"]},enum:{format:"table",items:{title:"alternative",type:"integer"},type:"array"},description:{type:"string"}}},propertySchema:{default:{type:"object"},oneOf:[{required:["type"],defaultProperties:["type"],additionalProperties:!1,title:"null type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"null"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["null"]},description:{type:"string"}}},{required:["type"],defaultProperties:["type"],additionalProperties:!1,title:"boolean type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"boolean"},format:{type:"string",enum:["select","checkbox"]},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["boolean"]},description:{type:"string"}}},{required:["type"],defaultProperties:["type"],additionalProperties:!1,title:"string type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"string"},format:{type:"string",enum:["color","date","datetime","datetime-local","email","month","number","range","tel","text","textarea","time","url","week","json","sql","xml","yaml"]},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["string"]},enum:{format:"table",items:{title:"alternative",type:"string"},type:"array"},description:{type:"string"}}},{required:["type"],defaultProperties:["type"],additionalProperties:!1,title:"integer type",type:"object",properties:{$ref:{format:"uri",type:"string"},maximum:{type:"integer"},default:{type:"integer"},minimum:{type:"integer"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["integer"]},enum:{format:"table",items:{title:"alternative",type:"integer"},type:"array"},description:{type:"string"}}},{required:["type"],defaultProperties:["type"],additionalProperties:!1,title:"number type",type:"object",properties:{$ref:{format:"uri",type:"string"},maximum:{type:"number"},default:{type:"number"},minimum:{type:"number"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["number"]},enum:{format:"table",items:{title:"alternative",type:"number"},type:"array"},description:{type:"string"}}},{required:["type"],defaultProperties:["type","properties"],additionalProperties:!1,title:"object type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"object"},format:{type:"string",enum:["grid"]},required:{uniqueItems:!0,format:"table",items:{title:"property",type:"string"},type:"array"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["object"]},description:{type:"string"},properties:{type:"object",patternProperties:{".*":{$ref:"#/definitions/propertySchema"}}}}},{required:["type"],defaultProperties:["type","items"],additionalProperties:!1,title:"array type",type:"object",properties:{$ref:{format:"uri",type:"string"},default:{type:"array"},format:{default:"table",type:"string",enum:["array","table","tabs","tabs-top","checkbox","select","categories"]},items:{$ref:"#/definitions/schema"},$schema:{format:"uri",type:"string"},id:{format:"uri",type:"string"},type:{options:{hidden:!0},type:"string",enum:["array"]},description:{type:"string"}}}],options:{keep_oneof_values:!1},type:"object"}}}}},[[101,1,2]]]);
//# sourceMappingURL=main.a2e4ec95.chunk.js.map